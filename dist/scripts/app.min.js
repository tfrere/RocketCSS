
(function(){angular.module('ngWheel',[]).directive('ngScroll',['$parse',function($parse){return function(scope,element,attr){var fn=$parse(attr.ngScroll);console.log('scroll!');element.bind('scroll',function(event){console.log('scroll!');scope.$apply(function(){fn(scope,{$event:event});});});};}]);}.call(this));angular.module('duParallax',['duScroll','duParallax.directive','duParallax.helper']);angular.module('duParallax.helper',[]).factory('parallaxHelper',function(){function createAnimator(factor,max,min,offset){return function(params){var delta=factor*((offset||0)+params.elemY);if(angular.isNumber(max)&&delta>max)return max;if(angular.isNumber(min)&&delta<min)return min;return delta;};}
return{createAnimator:createAnimator,background:createAnimator(-0.3,150,-30,50)};});angular.module('duParallax.directive',['duScroll']).directive('duParallax',["$rootScope","$window","$document",function($rootScope,$window,$document){var test=angular.element('<div></div>')[0];var prefixes='transform WebkitTransform MozTransform OTransform'.split(' ');var transformProperty;for(var i=0;i<prefixes.length;i++){if(test.style[prefixes[i]]!==undefined){transformProperty=prefixes[i];break;}}
if(!transformProperty){return;}
var translate3d=function(result){if(!result.x&&!result.y)return'';return'translate3d('+Math.round(result.x)+'px, '+Math.round(result.y)+'px, 0)';};var rotate=function(result){if(!result.rotation)return'';return' rotate('+(angular.isNumber(result.rotation)?Math.round(result.rotation)+'deg':result.rotation)+')';};var applyProperties=function(result,element){element.style[transformProperty]=translate3d(result)+rotate(result);element.style.opacity=result.opacity;if(result.custom){for(var property in result.custom){element.style[property]=result.custom[property];}}};return{scope:{y:'=',x:'=',rotation:'=',opacity:'=',custom:'='},link:function($scope,$element,$attr){var element=$element[0];var currentProperties;var inited=false;var onScroll=function(){var scrollY=$document.scrollTop();var rect=element.getBoundingClientRect();if(!inited){inited=true;angular.element($window).on('load',function init(){var i=0;var maxIterations=10;var currentY=rect.top;var lastY;do{lastY=currentY;onScroll();currentY=element.getBoundingClientRect().top;i++;}while(i<maxIterations&&lastY!==currentY);});}
var param={scrollY:scrollY,elemX:rect.left,elemY:rect.top};var properties={x:0,y:0,rotation:0,opacity:1,custom:undefined};for(var key in properties){if(angular.isFunction($scope[key])){properties[key]=$scope[key](param);}else if($scope[key]){properties[key]=$scope[key];}}
var hasChange=angular.isUndefined(currentProperties);if(!hasChange){for(key in properties){if(properties[key]!==currentProperties[key]){hasChange=true;break;}}}
if(hasChange){applyProperties(properties,element);currentProperties=properties;}};$document.on('scroll touchmove',onScroll).triggerHandler('scroll');$scope.$on('$destroy',function(){$document.off('scroll touchmove',onScroll);});}};}]);var duScrollDefaultEasing=function(x){'use strict';if((x/=0.5)<1)return 0.5*Math.pow(x,3);return 0.5*(Math.pow((x-2),3)+2);};angular.module('duScroll',['duScroll.scrollspy','duScroll.smoothScroll','duScroll.scrollContainer','duScroll.spyContext','duScroll.scrollHelpers']).value('duScrollDuration',350).value('duScrollSpyWait',100).value('duScrollGreedy',false).value('duScrollOffset',0).value('duScrollEasing',duScrollDefaultEasing).value('duScrollCancelOnEvents','scroll mousedown mousewheel touchmove keydown').value('duScrollBottomSpy',false).value('duScrollActiveClass','active');angular.module('duScroll.scrollHelpers',['duScroll.requestAnimation']).run(["$window","$q","cancelAnimation","requestAnimation","duScrollEasing","duScrollDuration","duScrollOffset","duScrollCancelOnEvents",function($window,$q,cancelAnimation,requestAnimation,duScrollEasing,duScrollDuration,duScrollOffset,duScrollCancelOnEvents){'use strict';var proto={};var isDocument=function(el){return(typeof HTMLDocument!=='undefined'&&el instanceof HTMLDocument)||(el.nodeType&&el.nodeType===el.DOCUMENT_NODE);};var isElement=function(el){return(typeof HTMLElement!=='undefined'&&el instanceof HTMLElement)||(el.nodeType&&el.nodeType===el.ELEMENT_NODE);};var unwrap=function(el){return isElement(el)||isDocument(el)?el:el[0];};proto.duScrollTo=function(left,top,duration,easing){var aliasFn;if(angular.isElement(left)){aliasFn=this.duScrollToElement;}else if(angular.isDefined(duration)){aliasFn=this.duScrollToAnimated;}
if(aliasFn){return aliasFn.apply(this,arguments);}
var el=unwrap(this);if(isDocument(el)){return $window.scrollTo(left,top);}
el.scrollLeft=left;el.scrollTop=top;};var scrollAnimation,deferred;proto.duScrollToAnimated=function(left,top,duration,easing){if(duration&&!easing){easing=duScrollEasing;}
var startLeft=this.duScrollLeft(),startTop=this.duScrollTop(),deltaLeft=Math.round(left-startLeft),deltaTop=Math.round(top-startTop);var startTime=null,progress=0;var el=this;var cancelScrollAnimation=function($event){if(!$event||(progress&&$event.which>0)){if(duScrollCancelOnEvents){el.unbind(duScrollCancelOnEvents,cancelScrollAnimation);}
cancelAnimation(scrollAnimation);deferred.reject();scrollAnimation=null;}};if(scrollAnimation){cancelScrollAnimation();}
deferred=$q.defer();if(duration===0||(!deltaLeft&&!deltaTop)){if(duration===0){el.duScrollTo(left,top);}
deferred.resolve();return deferred.promise;}
var animationStep=function(timestamp){if(startTime===null){startTime=timestamp;}
progress=timestamp-startTime;var percent=(progress>=duration?1:easing(progress/duration));el.scrollTo(startLeft+Math.ceil(deltaLeft*percent),startTop+Math.ceil(deltaTop*percent));if(percent<1){scrollAnimation=requestAnimation(animationStep);}else{if(duScrollCancelOnEvents){el.unbind(duScrollCancelOnEvents,cancelScrollAnimation);}
scrollAnimation=null;deferred.resolve();}};el.duScrollTo(startLeft,startTop);if(duScrollCancelOnEvents){el.bind(duScrollCancelOnEvents,cancelScrollAnimation);}
scrollAnimation=requestAnimation(animationStep);return deferred.promise;};proto.duScrollToElement=function(target,offset,duration,easing){var el=unwrap(this);if(!angular.isNumber(offset)||isNaN(offset)){offset=duScrollOffset;}
var top=this.duScrollTop()+unwrap(target).getBoundingClientRect().top-offset;if(isElement(el)){top-=el.getBoundingClientRect().top;}
return this.duScrollTo(0,top,duration,easing);};proto.duScrollLeft=function(value,duration,easing){if(angular.isNumber(value)){return this.duScrollTo(value,this.duScrollTop(),duration,easing);}
var el=unwrap(this);if(isDocument(el)){return $window.scrollX||document.documentElement.scrollLeft||document.body.scrollLeft;}
return el.scrollLeft;};proto.duScrollTop=function(value,duration,easing){if(angular.isNumber(value)){return this.duScrollTo(this.duScrollLeft(),value,duration,easing);}
var el=unwrap(this);if(isDocument(el)){return $window.scrollY||document.documentElement.scrollTop||document.body.scrollTop;}
return el.scrollTop;};proto.duScrollToElementAnimated=function(target,offset,duration,easing){return this.duScrollToElement(target,offset,duration||duScrollDuration,easing);};proto.duScrollTopAnimated=function(top,duration,easing){return this.duScrollTop(top,duration||duScrollDuration,easing);};proto.duScrollLeftAnimated=function(left,duration,easing){return this.duScrollLeft(left,duration||duScrollDuration,easing);};angular.forEach(proto,function(fn,key){angular.element.prototype[key]=fn;var unprefixed=key.replace(/^duScroll/,'scroll');if(angular.isUndefined(angular.element.prototype[unprefixed])){angular.element.prototype[unprefixed]=fn;}});}]);angular.module('duScroll.polyfill',[]).factory('polyfill',["$window",function($window){'use strict';var vendors=['webkit','moz','o','ms'];return function(fnName,fallback){if($window[fnName]){return $window[fnName];}
var suffix=fnName.substr(0,1).toUpperCase()+fnName.substr(1);for(var key,i=0;i<vendors.length;i++){key=vendors[i]+suffix;if($window[key]){return $window[key];}}
return fallback;};}]);angular.module('duScroll.requestAnimation',['duScroll.polyfill']).factory('requestAnimation',["polyfill","$timeout",function(polyfill,$timeout){'use strict';var lastTime=0;var fallback=function(callback,element){var currTime=new Date().getTime();var timeToCall=Math.max(0,16-(currTime-lastTime));var id=$timeout(function(){callback(currTime+timeToCall);},timeToCall);lastTime=currTime+timeToCall;return id;};return polyfill('requestAnimationFrame',fallback);}]).factory('cancelAnimation',["polyfill","$timeout",function(polyfill,$timeout){'use strict';var fallback=function(promise){$timeout.cancel(promise);};return polyfill('cancelAnimationFrame',fallback);}]);angular.module('duScroll.spyAPI',['duScroll.scrollContainerAPI']).factory('spyAPI',["$rootScope","$timeout","$window","$document","scrollContainerAPI","duScrollGreedy","duScrollSpyWait","duScrollBottomSpy","duScrollActiveClass",function($rootScope,$timeout,$window,$document,scrollContainerAPI,duScrollGreedy,duScrollSpyWait,duScrollBottomSpy,duScrollActiveClass){'use strict';var createScrollHandler=function(context){var timer=false,queued=false;var handler=function(){queued=false;var container=context.container,containerEl=container[0],containerOffset=0,bottomReached;if(typeof HTMLElement!=='undefined'&&containerEl instanceof HTMLElement||containerEl.nodeType&&containerEl.nodeType===containerEl.ELEMENT_NODE){containerOffset=containerEl.getBoundingClientRect().top;bottomReached=Math.round(containerEl.scrollTop+containerEl.clientHeight)>=containerEl.scrollHeight;}else{bottomReached=Math.round($window.pageYOffset+$window.innerHeight)>=$document[0].body.scrollHeight;}
var compareProperty=(duScrollBottomSpy&&bottomReached?'bottom':'top');var i,currentlyActive,toBeActive,spies,spy,pos;spies=context.spies;currentlyActive=context.currentlyActive;toBeActive=undefined;for(i=0;i<spies.length;i++){spy=spies[i];pos=spy.getTargetPosition();if(!pos)continue;if((duScrollBottomSpy&&bottomReached)||(pos.top+spy.offset-containerOffset<20&&(duScrollGreedy||pos.top*-1+containerOffset)<pos.height)){if(!toBeActive||toBeActive[compareProperty]<pos[compareProperty]){toBeActive={spy:spy};toBeActive[compareProperty]=pos[compareProperty];}}}
if(toBeActive){toBeActive=toBeActive.spy;}
if(currentlyActive===toBeActive||(duScrollGreedy&&!toBeActive))return;if(currentlyActive){currentlyActive.$element.removeClass(duScrollActiveClass);$rootScope.$broadcast('duScrollspy:becameInactive',currentlyActive.$element);}
if(toBeActive){toBeActive.$element.addClass(duScrollActiveClass);$rootScope.$broadcast('duScrollspy:becameActive',toBeActive.$element);}
context.currentlyActive=toBeActive;};if(!duScrollSpyWait){return handler;}
return function(){if(!timer){handler();timer=$timeout(function(){timer=false;if(queued){handler();}},duScrollSpyWait,false);}else{queued=true;}};};var contexts={};var createContext=function($scope){var id=$scope.$id;var context={spies:[]};context.handler=createScrollHandler(context);contexts[id]=context;$scope.$on('$destroy',function(){destroyContext($scope);});return id;};var destroyContext=function($scope){var id=$scope.$id;var context=contexts[id],container=context.container;if(container){container.off('scroll',context.handler);}
delete contexts[id];};var defaultContextId=createContext($rootScope);var getContextForScope=function(scope){if(contexts[scope.$id]){return contexts[scope.$id];}
if(scope.$parent){return getContextForScope(scope.$parent);}
return contexts[defaultContextId];};var getContextForSpy=function(spy){var context,contextId,scope=spy.$scope;if(scope){return getContextForScope(scope);}
for(contextId in contexts){context=contexts[contextId];if(context.spies.indexOf(spy)!==-1){return context;}}};var isElementInDocument=function(element){while(element.parentNode){element=element.parentNode;if(element===document){return true;}}
return false;};var addSpy=function(spy){var context=getContextForSpy(spy);if(!context)return;context.spies.push(spy);if(!context.container||!isElementInDocument(context.container)){if(context.container){context.container.off('scroll',context.handler);}
context.container=scrollContainerAPI.getContainer(spy.$scope);context.container.on('scroll',context.handler).triggerHandler('scroll');}};var removeSpy=function(spy){var context=getContextForSpy(spy);if(spy===context.currentlyActive){context.currentlyActive=null;}
var i=context.spies.indexOf(spy);if(i!==-1){context.spies.splice(i,1);}
spy.$element=null;};return{addSpy:addSpy,removeSpy:removeSpy,createContext:createContext,destroyContext:destroyContext,getContextForScope:getContextForScope};}]);angular.module('duScroll.scrollContainerAPI',[]).factory('scrollContainerAPI',["$document",function($document){'use strict';var containers={};var setContainer=function(scope,element){var id=scope.$id;containers[id]=element;return id;};var getContainerId=function(scope){if(containers[scope.$id]){return scope.$id;}
if(scope.$parent){return getContainerId(scope.$parent);}
return;};var getContainer=function(scope){var id=getContainerId(scope);return id?containers[id]:$document;};var removeContainer=function(scope){var id=getContainerId(scope);if(id){delete containers[id];}};return{getContainerId:getContainerId,getContainer:getContainer,setContainer:setContainer,removeContainer:removeContainer};}]);angular.module('duScroll.smoothScroll',['duScroll.scrollHelpers','duScroll.scrollContainerAPI']).directive('duSmoothScroll',["duScrollDuration","duScrollOffset","scrollContainerAPI",function(duScrollDuration,duScrollOffset,scrollContainerAPI){'use strict';return{link:function($scope,$element,$attr){$element.on('click',function(e){if((!$attr.href||$attr.href.indexOf('#')===-1)&&$attr.duSmoothScroll==='')return;var id=$attr.href?$attr.href.replace(/.*(?=#[^\s]+$)/,'').substring(1):$attr.duSmoothScroll;var target=document.getElementById(id)||document.getElementsByName(id)[0];if(!target||!target.getBoundingClientRect)return;if(e.stopPropagation)e.stopPropagation();if(e.preventDefault)e.preventDefault();var offset=$attr.offset?parseInt($attr.offset,10):duScrollOffset;var duration=$attr.duration?parseInt($attr.duration,10):duScrollDuration;var container=scrollContainerAPI.getContainer($scope);container.duScrollToElement(angular.element(target),isNaN(offset)?0:offset,isNaN(duration)?0:duration);});}};}]);angular.module('duScroll.spyContext',['duScroll.spyAPI']).directive('duSpyContext',["spyAPI",function(spyAPI){'use strict';return{restrict:'A',scope:true,compile:function compile(tElement,tAttrs,transclude){return{pre:function preLink($scope,iElement,iAttrs,controller){spyAPI.createContext($scope);}};}};}]);angular.module('duScroll.scrollContainer',['duScroll.scrollContainerAPI']).directive('duScrollContainer',["scrollContainerAPI",function(scrollContainerAPI){'use strict';return{restrict:'A',scope:true,compile:function compile(tElement,tAttrs,transclude){return{pre:function preLink($scope,iElement,iAttrs,controller){iAttrs.$observe('duScrollContainer',function(element){if(angular.isString(element)){element=document.getElementById(element);}
element=(angular.isElement(element)?angular.element(element):iElement);scrollContainerAPI.setContainer($scope,element);$scope.$on('$destroy',function(){scrollContainerAPI.removeContainer($scope);});});}};}};}]);angular.module('duScroll.scrollspy',['duScroll.spyAPI']).directive('duScrollspy',["spyAPI","duScrollOffset","$timeout","$rootScope",function(spyAPI,duScrollOffset,$timeout,$rootScope){'use strict';var Spy=function(targetElementOrId,$scope,$element,offset){if(angular.isElement(targetElementOrId)){this.target=targetElementOrId;}else if(angular.isString(targetElementOrId)){this.targetId=targetElementOrId;}
this.$scope=$scope;this.$element=$element;this.offset=offset;};Spy.prototype.getTargetElement=function(){if(!this.target&&this.targetId){this.target=document.getElementById(this.targetId)||document.getElementsByName(this.targetId)[0];}
return this.target;};Spy.prototype.getTargetPosition=function(){var target=this.getTargetElement();if(target){return target.getBoundingClientRect();}};Spy.prototype.flushTargetCache=function(){if(this.targetId){this.target=undefined;}};return{link:function($scope,$element,$attr){var href=$attr.ngHref||$attr.href;var targetId;if(href&&href.indexOf('#')!==-1){targetId=href.replace(/.*(?=#[^\s]+$)/,'').substring(1);}else if($attr.duScrollspy){targetId=$attr.duScrollspy;}else if($attr.duSmoothScroll){targetId=$attr.duSmoothScroll;}
if(!targetId)return;$timeout(function(){var spy=new Spy(targetId,$scope,$element,-($attr.offset?parseInt($attr.offset,10):duScrollOffset));spyAPI.addSpy(spy);$scope.$on('$locationChangeSuccess',spy.flushTargetCache.bind(spy));var deregisterOnStateChange=$rootScope.$on('$stateChangeSuccess',spy.flushTargetCache.bind(spy));$scope.$on('$destroy',function(){spyAPI.removeSpy(spy);deregisterOnStateChange();});},0,false);}};}]);(function($){var self=this,container,running=false,currentY=0,targetY=0,oldY=0,maxScrollTop=0,minScrollTop,direction,onRenderCallback=null,fricton=0.95,vy=0,stepAmt=1,minMovement=0.1,ts=0.1;var updateScrollTarget=function(amt){targetY+=amt;vy+=(targetY-oldY)*stepAmt;oldY=targetY;}
var render=function(){if(vy<-(minMovement)||vy>minMovement){currentY=(currentY+vy);if(currentY>maxScrollTop){currentY=vy=0;}else if(currentY<minScrollTop){vy=0;currentY=minScrollTop;}
container.scrollTop(-currentY);vy*=fricton;if(onRenderCallback){onRenderCallback();}}}
var animateLoop=function(){if(!running)return;requestAnimFrame(animateLoop);render();}
var onWheel=function(e){e.preventDefault();var evt=e.originalEvent;var delta=evt.detail?evt.detail*-1:evt.wheelDelta/40;var dir=delta<0?-1:1;if(dir!=direction){vy=0;direction=dir;}
currentY=-container.scrollTop();updateScrollTarget(delta);}
window.requestAnimFrame=(function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(callback){window.setTimeout(callback,1000/60);};})();var normalizeWheelDelta=function(){var distribution=[],done=null,scale=30;return function(n){if(n==0)return n;if(done!=null)return n*done;var abs=Math.abs(n);outer:do{for(var i=0;i<distribution.length;++i){if(abs<=distribution[i]){distribution.splice(i,0,abs);break outer;}}
distribution.push(abs);}while(false);var factor=scale/distribution[Math.floor(distribution.length/3)];if(distribution.length==500)done=factor;return n*factor;};}();$.fn.smoothWheel=function(){var options=jQuery.extend({},arguments[0]);return this.each(function(index,elm){if(!('ontouchstart'in window)){container=$(this);container.bind("mousewheel",onWheel);container.bind("DOMMouseScroll",onWheel);targetY=oldY=container.get(0).scrollTop;currentY=-targetY;minScrollTop=container.get(0).clientHeight-container.get(0).scrollHeight;if(options.onRender){onRenderCallback=options.onRender;}
if(options.remove){log("122","smoothWheel","remove","");running=false;container.unbind("mousewheel",onWheel);container.unbind("DOMMouseScroll",onWheel);}else if(!running){running=true;animateLoop();}}});};})(jQuery);var app=angular.module('app',['ui.router','ngWheel','duScroll','duParallax']);app.config(function($stateProvider,$urlRouterProvider,$locationProvider){$urlRouterProvider.otherwise('/');$stateProvider.state('nav',{abstract:true,templateUrl:'templates/nav.html',controller:'navCtrl'}).state('nav.home',{url:'/',templateUrl:'templates/home.html',controller:'homeCtrl'}).state('nav.faq',{url:'/faq',templateUrl:'templates/faq.html',controller:'faqCtrl'}).state('nav.apropos',{url:'/apropos',templateUrl:'templates/apropos.html',controller:'aproposCtrl'}).state('nav.contact',{url:'/contact',templateUrl:'templates/contact.html',controller:'contactCtrl'})});app.service('mouseParallaxService',function(){var IE=document.all?true:false
if(!IE)document.captureEvents(Event.MOUSEMOVE)
document.onmousemove=getMouseXY;var tempX=0;var tempY=0;var offsetTop=95;var objectArray=new Array();var windowWidth=document.body.offsetWidth;var windowHeight=document.body.offsetHeight;this.init=function()
{var birdDiv=document.getElementById("welcome");var birdX=windowWidth/2-150;var birdY=windowHeight/2-50;var birdFactor=0.03;var birdArray=new Array();birdArray.push(birdDiv,birdX,birdY,birdFactor);objectArray.push(birdArray);positionDivs();};function getMouseXY(e)
{if(IE)
{tempX=event.clientX+document.body.scrollLeft
tempY=event.clientY+document.body.scrollTop}
else
{tempX=e.pageX
tempY=e.pageY}
if(tempX<0){tempX=0}
if(tempY<0){tempY=0}
moveDiv(tempX);return true}
function moveDiv(tempX)
{for(var i=0;i<objectArray.length;i++)
{var yourDivPositionX=objectArray[i][3]*(0.5*windowWidth-tempX)+objectArray[i][1];objectArray[i][0].style.left=yourDivPositionX+'px';}}
function positionDivs()
{for(var i=0;i<objectArray.length;i++)
{objectArray[i][0].style.left=objectArray[i][1]+"px";}}});app.controller('navCtrl',function($scope){});app.controller('faqCtrl',function($scope){});app.controller('contactCtrl',function($scope){});app.controller('aproposCtrl',function($scope){});app.controller('homeCtrl',function($scope,mouseParallaxService){mouseParallaxService.init();});